import{Q as Ve,a as Ae}from"./QLayout.95efee50.js";import{x as we,l as o,j as H,y as ye,m as Pe,z as Z,r as M,w as c,o as ze,n as ce,A as Ne,B as Fe,C as fe,D as Re,f as Ue,h as pe,E as ke,G as q,H as je,t as l,I as r,Q as ve,J as ee,K as Ee,L as I,M as w,O as P,R as Ge,S as $,U as Ke,V as me,F as Je,W as he}from"./index.51f2b46b.js";import{Q as ae}from"./QBadge.afd40254.js";import{Q as Xe,a as Ye}from"./QHeader.6ff5d93a.js";import{Q as T,a as be,b as z}from"./QItem.b906d612.js";import{Q as Ze}from"./QList.cb9031bc.js";import{u as ea,a as aa}from"./use-prevent-scroll.397e4d9c.js";import{u as ta,a as na,b as la,c as oa,d as ra,e as ia}from"./use-timeout.040996d9.js";import{T as te}from"./TouchPan.1480097d.js";import{c as N,u as ua}from"./ui.f9c7454a.js";import{u as sa}from"./i18n.79f7761c.js";import{a as da,b as ca,c as fa}from"./branding.c750d619.js";import{t as va}from"./trails-logo.55705fef.js";import"./scroll.d64191c5.js";import"./QResizeObserver.c1e008d5.js";import"./touch.9135741d.js";import"./selection.bfd41920.js";var ma=we({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:d}){const u=o(()=>"q-toolbar__title ellipsis"+(e.shrink===!0?" col-shrink":""));return()=>H("div",{class:u.value},ye(d.default))}});const ge=150;var ha=we({name:"QDrawer",inheritAttrs:!1,props:{...ta,...na,side:{type:String,default:"left",validator:e=>["left","right"].includes(e)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},noMiniAnimation:Boolean,breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:e=>["default","desktop","mobile"].includes(e),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...la,"onLayout","miniState"],setup(e,{slots:d,emit:u,attrs:y}){const b=Ue(),{proxy:{$q:f}}=b,B=oa(e,f),{preventBodyScroll:C}=aa(),{registerTimeout:F,removeTimeout:ne}=ra(),t=Pe(Re,Z);if(t===Z)return console.error("QDrawer needs to be child of QLayout"),Z;let R,_=null,O;const s=M(e.behavior==="mobile"||e.behavior!=="desktop"&&t.totalWidth.value<=e.breakpoint),Q=o(()=>e.mini===!0&&s.value!==!0),m=o(()=>Q.value===!0?e.miniWidth:e.width),i=M(e.showIfAbove===!0&&s.value===!1?!0:e.modelValue===!0),le=o(()=>e.persistent!==!0&&(s.value===!0||$e.value===!0));function oe(a,n){if(Me(),a!==!1&&t.animate(),h(0),s.value===!0){const v=t.instances[V.value];v?.belowBreakpoint===!0&&v.hide(!1),p(1),t.isContainer.value!==!0&&C(!0)}else p(0),a!==!1&&J(!1);F(()=>{a!==!1&&J(!0),n!==!0&&u("show",a)},ge)}function re(a,n){_e(),a!==!1&&t.animate(),p(0),h(S.value*m.value),X(),n!==!0?F(()=>{u("hide",a)},ge):ne()}const{show:U,hide:x}=ia({showing:i,hideOnRouteChange:le,handleShow:oe,handleHide:re}),{addToHistory:Me,removeFromHistory:_e}=ea(i,x,le),W={belowBreakpoint:s,hide:x},g=o(()=>e.side==="right"),S=o(()=>(f.lang.rtl===!0?-1:1)*(g.value===!0?1:-1)),ie=M(0),L=M(!1),j=M(!1),ue=M(m.value*S.value),V=o(()=>g.value===!0?"left":"right"),E=o(()=>i.value===!0&&s.value===!1&&e.overlay===!1?e.miniToOverlay===!0?e.miniWidth:m.value:0),G=o(()=>e.overlay===!0||e.miniToOverlay===!0||t.view.value.indexOf(g.value?"R":"L")!==-1||f.platform.is.ios===!0&&t.isContainer.value===!0),D=o(()=>e.overlay===!1&&i.value===!0&&s.value===!1),$e=o(()=>e.overlay===!0&&i.value===!0&&s.value===!1),Be=o(()=>"fullscreen q-drawer__backdrop"+(i.value===!1&&L.value===!1?" hidden":"")),Ce=o(()=>({backgroundColor:`rgba(0,0,0,${ie.value*.4})`})),se=o(()=>g.value===!0?t.rows.value.top[2]==="r":t.rows.value.top[0]==="l"),Se=o(()=>g.value===!0?t.rows.value.bottom[2]==="r":t.rows.value.bottom[0]==="l"),Le=o(()=>{const a={};return t.header.space===!0&&se.value===!1&&(G.value===!0?a.top=`${t.header.offset}px`:t.header.space===!0&&(a.top=`${t.header.size}px`)),t.footer.space===!0&&Se.value===!1&&(G.value===!0?a.bottom=`${t.footer.offset}px`:t.footer.space===!0&&(a.bottom=`${t.footer.size}px`)),a}),Te=o(()=>{const a={width:`${m.value}px`,transform:`translateX(${ue.value}px)`};return s.value===!0?a:Object.assign(a,Le.value)}),qe=o(()=>"q-drawer__content fit "+(t.isContainer.value!==!0?"scroll":"overflow-auto")),Qe=o(()=>`q-drawer q-drawer--${e.side}`+(j.value===!0?" q-drawer--mini-animate":"")+(e.bordered===!0?" q-drawer--bordered":"")+(B.value===!0?" q-drawer--dark q-dark":"")+(L.value===!0?" no-transition":i.value===!0?"":" q-layout--prevent-focus")+(s.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${Q.value===!0?"mini":"standard"}`+(G.value===!0||D.value!==!0?" fixed":"")+(e.overlay===!0||e.miniToOverlay===!0?" q-drawer--on-top":"")+(se.value===!0?" q-drawer--top-padding":""))),xe=o(()=>{const a=f.lang.rtl===!0?e.side:V.value;return[[te,Oe,void 0,{[a]:!0,mouse:!0}]]}),De=o(()=>{const a=f.lang.rtl===!0?V.value:e.side;return[[te,de,void 0,{[a]:!0,mouse:!0}]]}),He=o(()=>{const a=f.lang.rtl===!0?V.value:e.side;return[[te,de,void 0,{[a]:!0,mouse:!0,mouseAllDir:!0}]]});function K(){We(s,e.behavior==="mobile"||e.behavior!=="desktop"&&t.totalWidth.value<=e.breakpoint)}c(s,a=>{a===!0?(R=i.value,i.value===!0&&x(!1)):e.overlay===!1&&e.behavior!=="mobile"&&R!==!1&&(i.value===!0?(h(0),p(0),X()):U(!1))}),c(()=>e.side,(a,n)=>{t.instances[n]===W&&(t.instances[n]=void 0,t[n].space=!1,t[n].offset=0),t.instances[a]=W,t[a].size=m.value,t[a].space=D.value,t[a].offset=E.value}),c(t.totalWidth,()=>{(t.isContainer.value===!0||document.qScrollPrevented!==!0)&&K()}),c(()=>e.behavior+e.breakpoint,K),c(t.isContainer,a=>{i.value===!0&&C(a!==!0),a===!0&&K()}),c(t.scrollbarWidth,()=>{h(i.value===!0?0:void 0)}),c(E,a=>{k("offset",a)}),c(D,a=>{u("onLayout",a),k("space",a)}),c(g,()=>{h()}),c(m,a=>{h(),Y(e.miniToOverlay,a)}),c(()=>e.miniToOverlay,a=>{Y(a,m.value)}),c(()=>f.lang.rtl,()=>{h()}),c(()=>e.mini,()=>{e.noMiniAnimation||e.modelValue===!0&&(Ie(),t.animate())}),c(Q,a=>{u("miniState",a)});function h(a){a===void 0?ce(()=>{a=i.value===!0?0:m.value,h(S.value*a)}):(t.isContainer.value===!0&&g.value===!0&&(s.value===!0||Math.abs(a)===m.value)&&(a+=S.value*t.scrollbarWidth.value),ue.value=a)}function p(a){ie.value=a}function J(a){const n=a===!0?"remove":t.isContainer.value!==!0?"add":"";n!==""&&document.body.classList[n]("q-body--drawer-toggle")}function Ie(){_!==null&&clearTimeout(_),b.proxy&&b.proxy.$el&&b.proxy.$el.classList.add("q-drawer--mini-animate"),j.value=!0,_=setTimeout(()=>{_=null,j.value=!1,b?.proxy?.$el?.classList.remove("q-drawer--mini-animate")},150)}function Oe(a){if(i.value!==!1)return;const n=m.value,v=N(a.distance.x,0,n);if(a.isFinal===!0){v>=Math.min(75,n)===!0?U():(t.animate(),p(0),h(S.value*n)),L.value=!1;return}h((f.lang.rtl===!0?g.value!==!0:g.value)?Math.max(n-v,0):Math.min(0,v-n)),p(N(v/n,0,1)),a.isFirst===!0&&(L.value=!0)}function de(a){if(i.value!==!0)return;const n=m.value,v=a.direction===e.side,A=(f.lang.rtl===!0?v!==!0:v)?N(a.distance.x,0,n):0;if(a.isFinal===!0){Math.abs(A)<Math.min(75,n)===!0?(t.animate(),p(1),h(0)):x(),L.value=!1;return}h(S.value*A),p(N(1-A/n,0,1)),a.isFirst===!0&&(L.value=!0)}function X(){C(!1),J(!0)}function k(a,n){t.update(e.side,a,n)}function We(a,n){a.value!==n&&(a.value=n)}function Y(a,n){k("size",a===!0?e.miniWidth:n)}return t.instances[e.side]=W,Y(e.miniToOverlay,m.value),k("space",D.value),k("offset",E.value),e.showIfAbove===!0&&e.modelValue!==!0&&i.value===!0&&e["onUpdate:modelValue"]!==void 0&&u("update:modelValue",!0),ze(()=>{u("onLayout",D.value),u("miniState",Q.value),R=e.showIfAbove===!0;const a=()=>{(i.value===!0?oe:re)(!1,!0)};if(t.totalWidth.value!==0){ce(a);return}O=c(t.totalWidth,()=>{O(),O=void 0,i.value===!1&&e.showIfAbove===!0&&s.value===!1?U(!1):a()})}),Ne(()=>{O?.(),_!==null&&(clearTimeout(_),_=null),i.value===!0&&X(),t.instances[e.side]===W&&(t.instances[e.side]=void 0,k("size",0),k("offset",0),k("space",!1))}),()=>{const a=[];s.value===!0&&(e.noSwipeOpen===!1&&a.push(Fe(H("div",{key:"open",class:`q-drawer__opener fixed-${e.side}`,"aria-hidden":"true"}),xe.value)),a.push(fe("div",{ref:"backdrop",class:Be.value,style:Ce.value,"aria-hidden":"true",onClick:x},void 0,"backdrop",e.noSwipeBackdrop!==!0&&i.value===!0,()=>He.value)));const n=Q.value===!0&&d.mini!==void 0,v=[H("div",{...y,key:""+n,class:[qe.value,y.class]},n===!0?d.mini():ye(d.default))];return e.elevated===!0&&i.value===!0&&v.push(H("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),a.push(fe("aside",{ref:"content",class:Qe.value,style:Te.value},v,"contentclose",e.noSwipeClose!==!0&&s.value===!0,()=>De.value)),H("div",{class:"q-drawer-container"},a)}}}),ba="/assets/bitpoints-logo-purple.679e20fd.png";const ga=pe({name:"MainHeader",mixins:[windowMixin],components:{},setup(){const e=M(!1),d=ua();sa();const u=M(0);let y;o(()=>da());const b=o(()=>fa()==="trails"?va:ba),f=o(()=>ca());return{leftDrawerOpen:e,toggleLeftDrawer:()=>{e.value=!e.value},isStaging:()=>location.host.includes("staging"),reload:()=>{if(u.value>0){d.unlockMutex(),clearInterval(y),u.value=0;return}d.globalMutexLock||(d.lockMutex(),u.value=3,y=setInterval(()=>{u.value--,u.value===0&&(clearInterval(y),d.unlockMutex(),location.reload())},1e3))},countdown:u,uiStore:d,brandLogo:b,brandName:f}}}),wa=["src","alt"];function ya(e,d,u,y,b,f){return q(),je(Je,null,[l(Ye,{class:"bg-transparent"},{default:r(()=>[l(Xe,null,{default:r(()=>[l(ve,{flat:"",dense:"",round:"",icon:"menu",color:"primary","aria-label":"Menu",onClick:e.toggleLeftDrawer,disable:e.uiStore.globalMutexLock},null,8,["onClick","disable"]),l(ma,{class:"flex flex-center"},{default:r(()=>[ee("img",{src:e.brandLogo,alt:e.brandName,style:{height:"100px","max-width":"400px","object-fit":"contain"}},null,8,wa)]),_:1}),l(Ee,{appear:"","enter-active-class":"animated wobble","leave-active-class":"animated fadeOut"},{default:r(()=>[e.g.offline?(q(),I(ae,{key:0,color:"red","text-color":"black",class:"q-mr-sm"},{default:r(()=>[ee("span",null,w(e.$t("MainHeader.offline.warning.text")),1)]),_:1})):P("",!0)]),_:1}),e.isStaging()?(q(),I(ae,{key:0,color:"yellow","text-color":"black",class:"q-mr-sm"},{default:r(()=>[ee("span",null,w(e.$t("MainHeader.staging.warning.text")),1)]),_:1})):P("",!0),l(Ge,{appear:"","enter-active-class":"animated pulse"},{default:r(()=>[e.countdown>0?(q(),I(ae,{key:0,color:"negative","text-color":"white",class:"q-mr-sm",onClick:e.reload},{default:r(()=>[$(w(e.$t("MainHeader.reload.warning.text",{countdown:e.countdown}))+" ",1),e.countdown>0?(q(),I(Ke,{key:0,size:"0.8em",thickness:10,class:"q-ml-sm",color:"white"})):P("",!0)]),_:1},8,["onClick"])):P("",!0)]),_:1}),l(ve,{flat:"",dense:"",round:"",size:"0.8em",icon:e.countdown>0?"close":"refresh",color:e.countdown>0?"negative":"primary","aria-label":"Refresh",onClick:e.reload,disable:e.uiStore.globalMutexLock&&e.countdown===0},null,8,["icon","color","onClick","disable"])]),_:1})]),_:1}),l(ha,{modelValue:e.leftDrawerOpen,"onUpdate:modelValue":d[0]||(d[0]=B=>e.leftDrawerOpen=B),bordered:""},{default:r(()=>[l(Ze,null,{default:r(()=>[l(T,{header:""},{default:r(()=>[$(w(e.$t("MainHeader.menu.settings.title")),1)]),_:1}),l(be,{clickable:"",to:"/settings"},{default:r(()=>[l(z,{avatar:""},{default:r(()=>[l(me,{name:"settings"})]),_:1}),l(z,null,{default:r(()=>[l(T,null,{default:r(()=>[$(w(e.$t("MainHeader.menu.settings.settings.title")),1)]),_:1}),l(T,{caption:""},{default:r(()=>[$(w(e.$t("MainHeader.menu.settings.settings.caption")),1)]),_:1})]),_:1})]),_:1}),l(T,{header:""},{default:r(()=>[$(w(e.$t("MainHeader.menu.terms.title")),1)]),_:1}),l(be,{clickable:"",to:"/terms"},{default:r(()=>[l(z,{avatar:""},{default:r(()=>[l(me,{name:"gavel"})]),_:1}),l(z,null,{default:r(()=>[l(T,null,{default:r(()=>[$(w(e.$t("MainHeader.menu.terms.terms.title")),1)]),_:1}),l(T,{caption:""},{default:r(()=>[$(w(e.$t("MainHeader.menu.terms.terms.caption")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}var pa=ke(ga,[["render",ya],["__scopeId","data-v-338a013c"]]);const ka=pe({name:"MainLayout",mixins:[windowMixin],components:{MainHeader:pa}});function Ma(e,d,u,y,b,f){const B=he("MainHeader"),C=he("router-view");return q(),I(Ve,{view:"lHh Lpr lFf"},{default:r(()=>[l(B),l(Ae,null,{default:r(()=>[l(C)]),_:1})]),_:1})}var za=ke(ka,[["render",Ma]]);export{za as default};
