import{Q as Oe,a as We}from"./QLayout.bc695220.js";import{x as Ve,m as Ae,y as Y,r as M,l as i,w as d,o as Pe,n as de,z as ze,A as Fe,j as A,B as ce,C as Ne,D as Re,f as Ue,h as be,E as ge,G as T,H as je,t as l,I as o,Q as fe,J as Ee,K as H,L as ae,M as b,O as P,R as Ge,S,U as Ke,V as ve,F as Xe,W as Je,X as Ye,Y as me}from"./index.7a0464ee.js";import{T as Z,Q as Ze}from"./TouchPan.16000ec2.js";import{Q as ee}from"./QBadge.c38431b1.js";import{Q as ea}from"./QToolbar.dee60588.js";import{Q as aa}from"./QHeader.c2551e96.js";import{Q as q,a as he,b as z}from"./QItem.fa8636d8.js";import{Q as ta}from"./QList.e5a0038a.js";import{u as na,a as la}from"./use-prevent-scroll.a488049c.js";import{u as oa,a as ra,b as ia,c as ua,d as sa,e as da}from"./use-timeout.7d10f4b4.js";import{b as F,u as ca}from"./ui.64f31f6c.js";import{u as fa}from"./i18n.e67af30b.js";import{_ as va}from"./bitpoints-logo.110fe423.js";import"./scroll.fc385f1c.js";import"./QResizeObserver.56aa05b8.js";import"./touch.9135741d.js";import"./selection.76f2443b.js";import"./index.81b98c8b.js";const we=150;var ma=Ve({name:"QDrawer",inheritAttrs:!1,props:{...oa,...ra,side:{type:String,default:"left",validator:e=>["left","right"].includes(e)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},noMiniAnimation:Boolean,breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:e=>["default","desktop","mobile"].includes(e),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...ia,"onLayout","miniState"],setup(e,{slots:c,emit:u,attrs:g}){const y=Ue(),{proxy:{$q:v}}=y,$=ua(e,v),{preventBodyScroll:x}=la(),{registerTimeout:te,removeTimeout:ye}=sa(),t=Ae(Re,Y);if(t===Y)return console.error("QDrawer needs to be child of QLayout"),Y;let N,_=null,I;const s=M(e.behavior==="mobile"||e.behavior!=="desktop"&&t.totalWidth.value<=e.breakpoint),L=i(()=>e.mini===!0&&s.value!==!0),m=i(()=>L.value===!0?e.miniWidth:e.width),r=M(e.showIfAbove===!0&&s.value===!1?!0:e.modelValue===!0),ne=i(()=>e.persistent!==!0&&(s.value===!0||Me.value===!0));function le(a,n){if(pe(),a!==!1&&t.animate(),h(0),s.value===!0){const f=t.instances[W.value];f?.belowBreakpoint===!0&&f.hide(!1),p(1),t.isContainer.value!==!0&&x(!0)}else p(0),a!==!1&&K(!1);te(()=>{a!==!1&&K(!0),n!==!0&&u("show",a)},we)}function oe(a,n){ke(),a!==!1&&t.animate(),p(0),h(C.value*m.value),X(),n!==!0?te(()=>{u("hide",a)},we):ye()}const{show:R,hide:Q}=da({showing:r,hideOnRouteChange:ne,handleShow:le,handleHide:oe}),{addToHistory:pe,removeFromHistory:ke}=na(r,Q,ne),O={belowBreakpoint:s,hide:Q},w=i(()=>e.side==="right"),C=i(()=>(v.lang.rtl===!0?-1:1)*(w.value===!0?1:-1)),re=M(0),B=M(!1),U=M(!1),ie=M(m.value*C.value),W=i(()=>w.value===!0?"left":"right"),j=i(()=>r.value===!0&&s.value===!1&&e.overlay===!1?e.miniToOverlay===!0?e.miniWidth:m.value:0),E=i(()=>e.overlay===!0||e.miniToOverlay===!0||t.view.value.indexOf(w.value?"R":"L")!==-1||v.platform.is.ios===!0&&t.isContainer.value===!0),D=i(()=>e.overlay===!1&&r.value===!0&&s.value===!1),Me=i(()=>e.overlay===!0&&r.value===!0&&s.value===!1),_e=i(()=>"fullscreen q-drawer__backdrop"+(r.value===!1&&B.value===!1?" hidden":"")),Se=i(()=>({backgroundColor:`rgba(0,0,0,${re.value*.4})`})),ue=i(()=>w.value===!0?t.rows.value.top[2]==="r":t.rows.value.top[0]==="l"),$e=i(()=>w.value===!0?t.rows.value.bottom[2]==="r":t.rows.value.bottom[0]==="l"),Ce=i(()=>{const a={};return t.header.space===!0&&ue.value===!1&&(E.value===!0?a.top=`${t.header.offset}px`:t.header.space===!0&&(a.top=`${t.header.size}px`)),t.footer.space===!0&&$e.value===!1&&(E.value===!0?a.bottom=`${t.footer.offset}px`:t.footer.space===!0&&(a.bottom=`${t.footer.size}px`)),a}),Be=i(()=>{const a={width:`${m.value}px`,transform:`translateX(${ie.value}px)`};return s.value===!0?a:Object.assign(a,Ce.value)}),qe=i(()=>"q-drawer__content fit "+(t.isContainer.value!==!0?"scroll":"overflow-auto")),Te=i(()=>`q-drawer q-drawer--${e.side}`+(U.value===!0?" q-drawer--mini-animate":"")+(e.bordered===!0?" q-drawer--bordered":"")+($.value===!0?" q-drawer--dark q-dark":"")+(B.value===!0?" no-transition":r.value===!0?"":" q-layout--prevent-focus")+(s.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${L.value===!0?"mini":"standard"}`+(E.value===!0||D.value!==!0?" fixed":"")+(e.overlay===!0||e.miniToOverlay===!0?" q-drawer--on-top":"")+(ue.value===!0?" q-drawer--top-padding":""))),xe=i(()=>{const a=v.lang.rtl===!0?e.side:W.value;return[[Z,He,void 0,{[a]:!0,mouse:!0}]]}),Le=i(()=>{const a=v.lang.rtl===!0?W.value:e.side;return[[Z,se,void 0,{[a]:!0,mouse:!0}]]}),Qe=i(()=>{const a=v.lang.rtl===!0?W.value:e.side;return[[Z,se,void 0,{[a]:!0,mouse:!0,mouseAllDir:!0}]]});function G(){Ie(s,e.behavior==="mobile"||e.behavior!=="desktop"&&t.totalWidth.value<=e.breakpoint)}d(s,a=>{a===!0?(N=r.value,r.value===!0&&Q(!1)):e.overlay===!1&&e.behavior!=="mobile"&&N!==!1&&(r.value===!0?(h(0),p(0),X()):R(!1))}),d(()=>e.side,(a,n)=>{t.instances[n]===O&&(t.instances[n]=void 0,t[n].space=!1,t[n].offset=0),t.instances[a]=O,t[a].size=m.value,t[a].space=D.value,t[a].offset=j.value}),d(t.totalWidth,()=>{(t.isContainer.value===!0||document.qScrollPrevented!==!0)&&G()}),d(()=>e.behavior+e.breakpoint,G),d(t.isContainer,a=>{r.value===!0&&x(a!==!0),a===!0&&G()}),d(t.scrollbarWidth,()=>{h(r.value===!0?0:void 0)}),d(j,a=>{k("offset",a)}),d(D,a=>{u("onLayout",a),k("space",a)}),d(w,()=>{h()}),d(m,a=>{h(),J(e.miniToOverlay,a)}),d(()=>e.miniToOverlay,a=>{J(a,m.value)}),d(()=>v.lang.rtl,()=>{h()}),d(()=>e.mini,()=>{e.noMiniAnimation||e.modelValue===!0&&(De(),t.animate())}),d(L,a=>{u("miniState",a)});function h(a){a===void 0?de(()=>{a=r.value===!0?0:m.value,h(C.value*a)}):(t.isContainer.value===!0&&w.value===!0&&(s.value===!0||Math.abs(a)===m.value)&&(a+=C.value*t.scrollbarWidth.value),ie.value=a)}function p(a){re.value=a}function K(a){const n=a===!0?"remove":t.isContainer.value!==!0?"add":"";n!==""&&document.body.classList[n]("q-body--drawer-toggle")}function De(){_!==null&&clearTimeout(_),y.proxy&&y.proxy.$el&&y.proxy.$el.classList.add("q-drawer--mini-animate"),U.value=!0,_=setTimeout(()=>{_=null,U.value=!1,y?.proxy?.$el?.classList.remove("q-drawer--mini-animate")},150)}function He(a){if(r.value!==!1)return;const n=m.value,f=F(a.distance.x,0,n);if(a.isFinal===!0){f>=Math.min(75,n)===!0?R():(t.animate(),p(0),h(C.value*n)),B.value=!1;return}h((v.lang.rtl===!0?w.value!==!0:w.value)?Math.max(n-f,0):Math.min(0,f-n)),p(F(f/n,0,1)),a.isFirst===!0&&(B.value=!0)}function se(a){if(r.value!==!0)return;const n=m.value,f=a.direction===e.side,V=(v.lang.rtl===!0?f!==!0:f)?F(a.distance.x,0,n):0;if(a.isFinal===!0){Math.abs(V)<Math.min(75,n)===!0?(t.animate(),p(1),h(0)):Q(),B.value=!1;return}h(C.value*V),p(F(1-V/n,0,1)),a.isFirst===!0&&(B.value=!0)}function X(){x(!1),K(!0)}function k(a,n){t.update(e.side,a,n)}function Ie(a,n){a.value!==n&&(a.value=n)}function J(a,n){k("size",a===!0?e.miniWidth:n)}return t.instances[e.side]=O,J(e.miniToOverlay,m.value),k("space",D.value),k("offset",j.value),e.showIfAbove===!0&&e.modelValue!==!0&&r.value===!0&&e["onUpdate:modelValue"]!==void 0&&u("update:modelValue",!0),Pe(()=>{u("onLayout",D.value),u("miniState",L.value),N=e.showIfAbove===!0;const a=()=>{(r.value===!0?le:oe)(!1,!0)};if(t.totalWidth.value!==0){de(a);return}I=d(t.totalWidth,()=>{I(),I=void 0,r.value===!1&&e.showIfAbove===!0&&s.value===!1?R(!1):a()})}),ze(()=>{I?.(),_!==null&&(clearTimeout(_),_=null),r.value===!0&&X(),t.instances[e.side]===O&&(t.instances[e.side]=void 0,k("size",0),k("offset",0),k("space",!1))}),()=>{const a=[];s.value===!0&&(e.noSwipeOpen===!1&&a.push(Fe(A("div",{key:"open",class:`q-drawer__opener fixed-${e.side}`,"aria-hidden":"true"}),xe.value)),a.push(ce("div",{ref:"backdrop",class:_e.value,style:Se.value,"aria-hidden":"true",onClick:Q},void 0,"backdrop",e.noSwipeBackdrop!==!0&&r.value===!0,()=>Qe.value)));const n=L.value===!0&&c.mini!==void 0,f=[A("div",{...g,key:""+n,class:[qe.value,g.class]},n===!0?c.mini():Ne(c.default))];return e.elevated===!0&&r.value===!0&&f.push(A("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),a.push(ce("aside",{ref:"content",class:Te.value,style:Be.value},f,"contentclose",e.noSwipeClose!==!0&&s.value===!0,()=>Le.value)),A("div",{class:"q-drawer-container"},a)}}});const ha=be({name:"MainHeader",mixins:[windowMixin],components:{},setup(){const e=M(!1),c=ca();fa();const u=M(0);let g;return{leftDrawerOpen:e,toggleLeftDrawer:()=>{e.value=!e.value},isStaging:()=>location.host.includes("staging"),reload:()=>{if(u.value>0){c.unlockMutex(),clearInterval(g),u.value=0;return}c.globalMutexLock||(c.lockMutex(),u.value=3,g=setInterval(()=>{u.value--,u.value===0&&(clearInterval(g),c.unlockMutex(),location.reload())},1e3))},countdown:u,uiStore:c}}}),wa=e=>(Je("data-v-0c50f018"),e=e(),Ye(),e),ba=wa(()=>ae("img",{src:va,alt:"Bitpoints",style:{height:"100px","max-width":"400px","object-fit":"contain"}},null,-1));function ga(e,c,u,g,y,v){return T(),je(Xe,null,[l(aa,{class:"bg-transparent"},{default:o(()=>[l(ea,null,{default:o(()=>[l(fe,{flat:"",dense:"",round:"",icon:"menu",color:"primary","aria-label":"Menu",onClick:e.toggleLeftDrawer,disable:e.uiStore.globalMutexLock},null,8,["onClick","disable"]),l(Ze,{class:"flex flex-center"},{default:o(()=>[ba]),_:1}),l(Ee,{appear:"","enter-active-class":"animated wobble","leave-active-class":"animated fadeOut"},{default:o(()=>[e.g.offline?(T(),H(ee,{key:0,color:"red","text-color":"black",class:"q-mr-sm"},{default:o(()=>[ae("span",null,b(e.$t("MainHeader.offline.warning.text")),1)]),_:1})):P("",!0)]),_:1}),e.isStaging()?(T(),H(ee,{key:0,color:"yellow","text-color":"black",class:"q-mr-sm"},{default:o(()=>[ae("span",null,b(e.$t("MainHeader.staging.warning.text")),1)]),_:1})):P("",!0),l(Ge,{appear:"","enter-active-class":"animated pulse"},{default:o(()=>[e.countdown>0?(T(),H(ee,{key:0,color:"negative","text-color":"white",class:"q-mr-sm",onClick:e.reload},{default:o(()=>[S(b(e.$t("MainHeader.reload.warning.text",{countdown:e.countdown}))+" ",1),e.countdown>0?(T(),H(Ke,{key:0,size:"0.8em",thickness:10,class:"q-ml-sm",color:"white"})):P("",!0)]),_:1},8,["onClick"])):P("",!0)]),_:1}),l(fe,{flat:"",dense:"",round:"",size:"0.8em",icon:e.countdown>0?"close":"refresh",color:e.countdown>0?"negative":"primary","aria-label":"Refresh",onClick:e.reload,disable:e.uiStore.globalMutexLock&&e.countdown===0},null,8,["icon","color","onClick","disable"])]),_:1})]),_:1}),l(ma,{modelValue:e.leftDrawerOpen,"onUpdate:modelValue":c[0]||(c[0]=$=>e.leftDrawerOpen=$),bordered:""},{default:o(()=>[l(ta,null,{default:o(()=>[l(q,{header:""},{default:o(()=>[S(b(e.$t("MainHeader.menu.settings.title")),1)]),_:1}),l(he,{clickable:"",to:"/settings"},{default:o(()=>[l(z,{avatar:""},{default:o(()=>[l(ve,{name:"settings"})]),_:1}),l(z,null,{default:o(()=>[l(q,null,{default:o(()=>[S(b(e.$t("MainHeader.menu.settings.settings.title")),1)]),_:1}),l(q,{caption:""},{default:o(()=>[S(b(e.$t("MainHeader.menu.settings.settings.caption")),1)]),_:1})]),_:1})]),_:1}),l(q,{header:""},{default:o(()=>[S(b(e.$t("MainHeader.menu.terms.title")),1)]),_:1}),l(he,{clickable:"",to:"/terms"},{default:o(()=>[l(z,{avatar:""},{default:o(()=>[l(ve,{name:"gavel"})]),_:1}),l(z,null,{default:o(()=>[l(q,null,{default:o(()=>[S(b(e.$t("MainHeader.menu.terms.terms.title")),1)]),_:1}),l(q,{caption:""},{default:o(()=>[S(b(e.$t("MainHeader.menu.terms.terms.caption")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}var ya=ge(ha,[["render",ga],["__scopeId","data-v-0c50f018"]]);const pa=be({name:"MainLayout",mixins:[windowMixin],components:{MainHeader:ya}});function ka(e,c,u,g,y,v){const $=me("MainHeader"),x=me("router-view");return T(),H(Oe,{view:"lHh Lpr lFf"},{default:o(()=>[l($),l(We,null,{default:o(()=>[l(x)]),_:1})]),_:1})}var za=ge(pa,[["render",ka]]);export{za as default};
